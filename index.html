<!DOCTYPE html>
<html lang="pl">
<head>
    <meta name="google-adsense-account" content="ca-pub-5486175208501620">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasze Klipy + CS2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e1e;
            color: #fff;
            text-align: center;
            padding: 20px;
        }
        h1 { margin-bottom: 40px; }
        .video-container { margin-bottom: 40px; }
        iframe { width: 80%; max-width: 560px; height: 315px; }

        /* Styl do ekranu logowania */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #111; display: flex; justify-content: center; align-items: center; flex-direction: column; z-index: 9999;
        }
        #login-screen input { padding: 10px; font-size: 16px; margin-top: 10px; border: none; border-radius: 5px; }
        #login-screen button { padding: 10px 20px; margin-top: 10px; background-color: #444; color: white; border: none; border-radius: 5px; cursor: pointer; }
        #error { color: red; margin-top: 10px; }

        /* Menu */
        nav { margin-bottom: 30px; }
        nav button { background-color: #333; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer; }
        nav button:hover { background-color: #555; }

        /* Gry */
        #gameCanvas, #cs2Canvas { background-color: #222; display: block; margin: 0 auto; border: 2px solid white; }
        .controls { margin-top: 10px; }
        .hud { color: #fff; font-family: monospace; }
        .panel { margin-bottom: 10px; }

        /* CS2 3D container style */
        #cs2SceneContainer { width: 900px; height: 500px; margin: 0 auto; border: 2px solid white; background:#000; position:relative; }
        #cs2Overlay { position:absolute; left:10px; top:10px; color:#fff; z-index:10; font-family:monospace; }
        #start3DBtn, #restart3DBtn { margin-right: 8px; }
    </style>
</head>
<body>
    <!-- Ekran logowania -->
    <div id="login-screen">
        <h2>Zaloguj siƒô</h2>
        <input type="text" id="username" placeholder="Nazwa u≈ºytkownika">
        <input type="password" id="password" placeholder="Has≈Ço">
        <button onclick="checkLogin()">Wejd≈∫</button>
        <p id="error"></p>
    </div>

    <!-- Zawarto≈õƒá strony -->
    <div id="content" style="display:none;">
        <nav>
            <button onclick="showSection('clips')">üé• Klipy cebulka</button>
            <button onclick="showSection('game')">üéÆ geometryjny dach</button>
            <button onclick="showSection('cs2')">üî´ CS2</button>
        </nav>

        <!-- Sekcja z klipami -->
        <div id="clips">
            <h1>Klipy cebulka300</h1>

            <div class="video-container">
                <h2>Znany "kutavon"</h2>
                <iframe src="https://www.youtube.com/embed/6d7HCDqedlg" title="Kutavon 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            <p>Autor <b>Julus</b></p>

            <div class="video-container">
                <h2>kutvos zasmarkony</h2>
                <iframe src="https://www.youtube.com/embed/DDZsX7TIIgk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <p>Autor <b>Julus</b></p>

            <div class="video-container">
                <h2>rage bait</h2>
                <iframe src="https://www.youtube.com/embed/ykAHaOBYS3s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <p>Autor <b>Julus</b></p>
        </div>

        <!-- Sekcja z Geometry Dash -->
        <div id="game" style="display:none;">
            <h1>Geometry Dash üü¶ ‚Äî Level 1</h1>
            <canvas id="gameCanvas" width="400" height="500"></canvas>
            <p>Kliknij lub naci≈õnij spacjƒô, ≈ºeby podskoczyƒá!</p>
        </div>

        <!-- Sekcja CS2 (tu podmieniono 2D na 3D) -->
        <div id="cs2" style="display:none;">
            <h1>CS2 ‚Äî tryb treningowy (3D)</h1>
            <div class="panel">
                <button id="startCs2" onclick="start3DGame()">Start Gry 3D</button>
                <button id="restartCs2" onclick="location.reload()">Restart</button>
                <span class="hud"> Zdrowie: <span id="playerHealth">100</span> | Punkty: <span id="cs2Score">0</span></span>
            </div>
            <!-- tutaj renderer Three.js zostanie wstawiony -->
            <div id="cs2SceneContainer">
                <div id="cs2Overlay">Kliknij 'Start Gry 3D' aby uruchomiƒá. Po uruchomieniu kliknij na ekran, aby zablokowaƒá mysz.</div>
            </div>
            <div class="controls">
                Sterowanie: WASD ‚Äî ruch, mysz ‚Äî celowanie, lewy klik ‚Äî strza≈Ç, Esc ‚Äî odblokuj mysz.
            </div>
            <p style="font-size:12px; opacity:0.8;">Jedyna gra w ktorej cebulka moze zrobic wiecej killi niz 1</p>
        </div>
    </div>

    <script>
        // --------------------
        // Logowanie z kontami
        // --------------------
        const accounts = {
            "user": "haslo6559669",
            "julus": "julus696d967",
            "admin": "adminabuse"
        };

        function checkLogin() {
            const user = document.getElementById("username").value.trim().toLowerCase();
            const pass = document.getElementById("password").value;

            if (accounts[user] && accounts[user] === pass) {
                document.getElementById("login-screen").style.display = "none";
                document.getElementById("content").style.display = "block";
                document.getElementById("error").textContent = "";
            } else {
                document.getElementById("error").textContent = "Niepoprawna nazwa u≈ºytkownika lub has≈Ço!";
            }
        }

        // --------------------
        // Menu i sekcje
        // --------------------
        function showSection(section) {
            document.getElementById('clips').style.display = 'none';
            document.getElementById('game').style.display = 'none';
            document.getElementById('cs2').style.display = 'none';
            document.getElementById(section).style.display = 'block';
        }

        // --------------------
        // Geometry Dash
        // --------------------
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const G = { width: canvas.width, height: canvas.height, groundY: 420 };
        const player = { x: 80, y: G.groundY - 40, size: 34, vy: 0, gravity: 0.9, jumpPower: -15, onGround: true, color: '#00bfff' };
        let scrollSpeed = 4, gameStarted = false, gameOver = false, distance = 0;
        const obstacles = [];
        const levelPattern = [
            ['box', 250], ['spike', 160], ['spike', 60], ['gap', 200], ['box', 260],
            ['box', 140], ['spike', 120], ['gap', 220], ['box', 260], ['spike', 120],
            ['box', 140], ['gap', 180], ['spike', 130], ['box', 200], ['box', 140],
            ['spike', 80], ['gap', 260], ['box', 280], ['spike', 120], ['box', 140],
            ['gap', 320]
        ];

        function buildLevel() {
            obstacles.length = 0;
            let x = G.width + 80;
            for (const item of levelPattern) {
                const type = item[0], offset = item[1];
                x += offset;
                if (type === 'spike') obstacles.push({ type: 'spike', x: x, w: 40, h: 26 }), x+=40;
                else if (type === 'box') obstacles.push({ type: 'box', x: x, w: 40, h: 40 }), x+=40;
                else if (type === 'gap') obstacles.push({ type: 'gap', x: x, w: item[1], h: 0 }), x+=item[1];
            }
            obstacles.push({ type: 'flag', x: x + 200, w: 20, h: 80 });
        }
        buildLevel();

        function resetGD() {
            player.y = G.groundY - player.size;
            player.vy = 0; player.onGround = true;
            gameStarted = false; gameOver = false; distance = 0; scrollSpeed = 4;
            buildLevel();
        }

        function doJump() {
            if (gameOver) { resetGD(); return; }
            if (!gameStarted) gameStarted = true;
            if (player.onGround) { player.vy = player.jumpPower; player.onGround = false; }
        }
        document.addEventListener('keydown', e => { if(e.code==='Space'){ e.preventDefault(); doJump(); }});
        canvas.addEventListener('mousedown', doJump);

        function rectsIntersect(rx, ry, rw, rh, px, py, pw, ph) {
            return !(px + pw < rx || px > rx + rw || py + ph < ry || py > ry + rh);
        }

        function updateGD() {
            if(!gameStarted || gameOver) return;
            player.vy += player.gravity;
            player.y += player.vy;
            if(player.y + player.size >= G.groundY) { player.y = G.groundY - player.size; player.vy=0; player.onGround=true; } else player.onGround=false;
            for(let i=obstacles.length-1;i>=0;i--){ const obj=obstacles[i]; obj.x-=scrollSpeed; if(obj.x+(obj.w||0)<-200) obstacles.splice(i,1);}
            distance += scrollSpeed*0.1;

            for(const obj of obstacles){ 
                if(obj.type==='flag' && obj.x<player.x+40){ gameOver=true; gameStarted=false; scrollSpeed=0;}
                else if(obj.type==='box' && rectsIntersect(obj.x, G.groundY-obj.h, obj.w, obj.h, player.x, player.y, player.size, player.size)) gameOver=true;
                else if(obj.type==='spike' && rectsIntersect(obj.x, G.groundY-obj.h, obj.w, obj.h, player.x, player.y, player.size, player.size)) gameOver=true;
                else if(obj.type==='gap' && player.x+player.size>obj.x && player.x<obj.x+obj.w && player.onGround){ player.y+=2; player.onGround=false; }
            }
            if(player.y>G.height+50 || player.y<-200) gameOver=true;
            if(distance>4000 && scrollSpeed<6) scrollSpeed=5;
            if(distance>8000 && scrollSpeed<7) scrollSpeed=6;
        }

        function drawGD() {
            ctx.fillStyle='#000'; ctx.fillRect(0,0,G.width,G.height);
            ctx.fillStyle='#111'; ctx.fillRect(0,G.groundY,G.width,G.height-G.groundY);
            ctx.fillStyle='#1a1a1a';
            for(let i=0;i<8;i++) ctx.fillRect((i*100)-((distance*0.2)%100), G.groundY-6-(i%2)*3, 80, 2);
            for(const obj of obstacles){
                if(obj.type==='box'){ ctx.fillStyle='#8b4513'; ctx.fillRect(Math.round(obj.x), G.groundY-obj.h, obj.w, obj.h); ctx.strokeStyle='#5a2f0f'; ctx.strokeRect(Math.round(obj.x), G.groundY-obj.h, obj.w, obj.h); }
                else if(obj.type==='spike'){ const sx=Math.round(obj.x),sy=G.groundY-obj.h,tw=obj.w/3; ctx.fillStyle='#ff3333'; for(let i=0;i<3;i++){ ctx.beginPath(); ctx.moveTo(sx+i*tw, sy+obj.h); ctx.lineTo(sx+i*tw+tw/2, sy); ctx.lineTo(sx+i*tw+tw, sy+obj.h); ctx.closePath(); ctx.fill(); } }
                else if(obj.type==='gap'){ ctx.fillStyle='#111'; ctx.fillRect(Math.round(obj.x)-2,G.groundY-4,4,4); ctx.fillRect(Math.round(obj.x+obj.w)-2,G.groundY-4,4,4);}
                else if(obj.type==='flag'){ const fx=Math.round(obj.x),fy=G.groundY-obj.h; ctx.fillStyle='#ffcc00'; ctx.fillRect(fx,fy,6,obj.h); ctx.fillStyle='#ff3333'; ctx.beginPath(); ctx.moveTo(fx+6,fy); ctx.lineTo(fx+30,fy+14); ctx.lineTo(fx+6,fy+28); ctx.closePath(); ctx.fill(); }
            }
            ctx.fillStyle=player.color; ctx.fillRect(Math.round(player.x), Math.round(player.y), player.size, player.size); ctx.fillStyle='rgba(0,0,0,0.15)'; ctx.fillRect(Math.round(player.x), Math.round(player.y)+player.size-6, player.size, 6);
            ctx.fillStyle='white'; ctx.font='18px monospace'; ctx.fillText('Dystans: '+Math.floor(distance)+'m',12,30);
            if(!gameStarted && !gameOver){ ctx.fillStyle='rgba(0,0,0,0.5)'; ctx.fillRect(0,0,G.width,G.height); ctx.fillStyle='white'; ctx.font='22px Arial'; ctx.fillText('Kliknij / Spacja ≈ºeby START', G.width/2 - 140, G.height/2); }
            if(gameOver){ ctx.fillStyle='rgba(0,0,0,0.6)'; ctx.fillRect(0,0,G.width,G.height); ctx.fillStyle='white'; ctx.font='26px Arial'; ctx.fillText('KONIEC LEVELU', G.width/2-100,G.height/2-10); ctx.font='18px Arial'; ctx.fillText('Kliknij, ≈ºeby zresetowaƒá', G.width/2-100,G.height/2+20);}
        }

        function loopGD(){ updateGD(); drawGD(); requestAnimationFrame(loopGD); }
        loopGD();

        // ---------------------------
        // CS2 -> podmieniono 2D na 3D (Three.js)
        // Implementacja: start3DGame() dynamicznie wstrzykuje skrypt typu module
        // ---------------------------
        function start3DGame() {
            // zapobiegamy wielokrotnemu uruchomieniu
            const startBtn = document.getElementById('startCs2');
            startBtn.disabled = true;
            startBtn.textContent = '≈Åadowanie...';

            // wstrzykniƒôcie modu≈Çu z Three.js + PointerLockControls
            const moduleScript = document.createElement('script');
            moduleScript.type = 'module';
            moduleScript.textContent = `
                import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js';
                import { PointerLockControls } from 'https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/controls/PointerLockControls.js';

                const container = document.getElementById('cs2SceneContainer');
                // usu≈Ñ ewentualne elementy pozostawione
                container.innerHTML = '<div id="cs2Overlay" style="position:absolute;left:10px;top:10px;color:#fff;z-index:10;font-family:monospace;"></div>';
                const overlay = document.getElementById('cs2Overlay');
                overlay.textContent = "Kliknij w ekran aby zablokowaƒá mysz i graƒá";

                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x657789);

                const camera = new THREE.PerspectiveCamera(75, 900/500, 0.1, 1000);
                camera.position.set(0, 1.8, 5);

                const renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(900, 500);
                renderer.domElement.style.display = 'block';
                // umie≈õƒá renderer w kontenerze
                container.appendChild(renderer.domElement);

                // ≈õwiat≈Ça
                const hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 0.7);
                hemi.position.set(0, 50, 0);
                scene.add(hemi);
                const dir = new THREE.DirectionalLight(0xffffff, 0.6);
                dir.position.set(10, 10, 5);
                scene.add(dir);

                // teren
                const planeGeo = new THREE.PlaneGeometry(200, 200);
                const planeMat = new THREE.MeshStandardMaterial({ color: 0x2b2b2b });
                const plane = new THREE.Mesh(planeGeo, planeMat);
                plane.rotation.x = -Math.PI / 2;
                scene.add(plane);

                // proste przeszkody/przeciwnicy jako pude≈Çka
                const enemies = [];
                const boxGeo = new THREE.BoxGeometry(1.6, 1.8, 1.6);
                for (let i = 0; i < 18; i++) {
                    const mat = new THREE.MeshStandardMaterial({ color: 0x8f2b2b });
                    const box = new THREE.Mesh(boxGeo, mat);
                    box.position.set((Math.random() - 0.5) * 60, 0.9, (Math.random() - 0.5) * 60);
                    box.userData.hp = 100;
                    scene.add(box);
                    enemies.push(box);
                }

                // bro≈Ñ (viewmodel) ‚Äî prosty czarny prostokƒÖt przy kamerze
                const gunGeo = new THREE.BoxGeometry(0.2, 0.12, 0.6);
                const gunMat = new THREE.MeshStandardMaterial({ color: 0x111111 });
                const gun = new THREE.Mesh(gunGeo, gunMat);
                gun.position.set(0, -0.15, -0.5);
                camera.add(gun);
                scene.add(camera);

                // controls (pointer lock)
                const controls = new PointerLockControls(camera, renderer.domElement);
                renderer.domElement.addEventListener('click', () => {
                    controls.lock();
                });
                controls.addEventListener('lock', () => { overlay.style.display = 'none'; });
                controls.addEventListener('unlock', () => { overlay.style.display = 'block'; overlay.textContent = 'Mysz odblokowana. Kliknij ponownie aby zablokowaƒá.'; });

                // ruch
                const move = { f: false, b: false, l: false, r: false };
                const velocity = new THREE.Vector3();
                const direction = new THREE.Vector3();
                const speed = 6.0; // jednostka prƒôdko≈õci
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'KeyW') move.f = true;
                    if (e.code === 'KeyS') move.b = true;
                    if (e.code === 'KeyA') move.l = true;
                    if (e.code === 'KeyD') move.r = true;
                });
                document.addEventListener('keyup', (e) => {
                    if (e.code === 'KeyW') move.f = false;
                    if (e.code === 'KeyS') move.b = false;
                    if (e.code === 'KeyA') move.l = false;
                    if (e.code === 'KeyD') move.r = false;
                });

                // strzelanie (raycast)
                const raycaster = new THREE.Raycaster();
                let ammo = 30;
                let score = 0;
                const healthEl = document.getElementById('playerHealth');
                const scoreEl = document.getElementById('cs2Score');
                healthEl.textContent = 100;
                scoreEl.textContent = 0;

                renderer.domElement.addEventListener('mousedown', (ev) => {
                    if (!controls.isLocked) return;
                    if (ammo <= 0) {
                        overlay.style.display = 'block';
                        overlay.textContent = 'Brak amunicji. Restart aby odnowiƒá.';
                        return;
                    }
                    ammo--;
                    // raycast z kamery na centum ekranu
                    raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);
                    const hits = raycaster.intersectObjects(enemies, false);
                    if (hits.length > 0) {
                        const obj = hits[0].object;
                        obj.userData.hp -= 50;
                        // lekki efekt - skalowanie
                        obj.scale.y *= 0.9;
                        if (obj.userData.hp <= 0) {
                            scene.remove(obj);
                            const idx = enemies.indexOf(obj);
                            if (idx !== -1) enemies.splice(idx, 1);
                            score += 1;
                            scoreEl.textContent = score;
                            // spawn nowego po chwili
                            setTimeout(() => {
                                const mat = new THREE.MeshStandardMaterial({ color: 0x8f2b2b });
                                const box = new THREE.Mesh(boxGeo, mat);
                                box.position.set((Math.random() - 0.5) * 60, 0.9, (Math.random() - 0.5) * 60);
                                box.userData.hp = 100;
                                scene.add(box);
                                enemies.push(box);
                            }, 1200);
                        }
                    }
                });

                // prosty system zdrowia gracza (kolizja z enemy)
                let playerHp = 100;
                function checkCollisions() {
                    for (let e of enemies) {
                        const dx = e.position.x - camera.position.x;
                        const dz = e.position.z - camera.position.z;
                        const dist = Math.sqrt(dx*dx + dz*dz);
                        if (dist < 1.8) {
                            playerHp -= 0.2; // stopniowe obra≈ºenia podczas kolizji
                            if (playerHp < 0) playerHp = 0;
                            healthEl.textContent = Math.floor(playerHp);
                        }
                    }
                }

                // prosta kamera/collision ograniczajƒÖca poruszanie siƒô po terenie
                function clampPosition() {
                    camera.position.x = Math.max(-98, Math.min(98, camera.position.x));
                    camera.position.z = Math.max(-98, Math.min(98, camera.position.z));
                    camera.position.y = Math.max(1.2, camera.position.y);
                }

                const clock = new THREE.Clock();
                function animate() {
                    const delta = clock.getDelta();
                    // t≈Çumienie
                    velocity.x -= velocity.x * 10.0 * delta;
                    velocity.z -= velocity.z * 10.0 * delta;

                    direction.z = Number(move.f) - Number(move.b);
                    direction.x = Number(move.r) - Number(move.l);
                    direction.normalize();

                    if (move.f || move.b) velocity.z -= direction.z * speed * 10 * delta;
                    if (move.l || move.r) velocity.x -= direction.x * speed * 10 * delta;

                    controls.moveRight(-velocity.x * delta);
                    controls.moveForward(-velocity.z * delta);

                    clampPosition();
                    checkCollisions();

                    renderer.render(scene, camera);
                    requestAnimationFrame(animate);
                }
                animate();

                // po za≈Çadowaniu ustaw tekst przycisku
                const origStartBtn = parent.document.getElementById('startCs2');
                if (origStartBtn) { origStartBtn.textContent = 'Gra uruchomiona'; origStartBtn.disabled = true; }

            `;
            document.body.appendChild(moduleScript);

            // delikatne UI - usu≈Ñ tekst ≈Çadowania
            moduleScript.onload = () => {
                const startBtn2 = document.getElementById('startCs2');
                if (startBtn2) { startBtn2.textContent = 'Gra uruchomiona'; startBtn2.disabled = true; }
            };

            // safety fallback: je≈õli modu≈Ç nie zadzia≈Ça (np. blokowanie CDN), poinformuj usera
            setTimeout(() => {
                const startBtn3 = document.getElementById('startCs2');
                if (startBtn3 && startBtn3.textContent === '≈Åadowanie...') {
                    startBtn3.textContent = 'Start Gry 3D (spr√≥buj jeszcze raz)';
                    startBtn3.disabled = false;
                    const overlay = document.getElementById('cs2Overlay');
                    if (overlay) overlay.textContent = 'WystƒÖpi≈Ç problem z za≈Çadowaniem modu≈Çu Three.js. Sprawd≈∫ po≈ÇƒÖczenie internetowe.';
                }
            }, 6000);
        }

        // koniec CS2 3D
    </script>
</body>
</html>
